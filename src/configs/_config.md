# 📁 Config 폴더 개념

## ✦ 의도

config 폴더는 **서버 전체에서 공통으로 사용되는 환경 설정을 한 곳에 모아두는 공간**이다.
즉, 서비스 로직과는 무관하지만 서버가 동작하려면 반드시 필요한 값들을 담는다.

이 값들은 환경(dev/stage/prod)에 따라 바뀌거나,
애플리케이션 전역에서 사용되는 “환경 의존적 설정”이기 때문에
기능 로직과 분리하여 따로 관리하는 것이 가장 안정적이다.

---

## ✦ 특징

- 앱이 시작될 때 단 한 번 로드되는 설정 모음
- 여러 모듈이 공유해야 하는 재사용 값들을 정의
- 환경 변수(.env)와 직접 연결되는 값이 많음
- 실무에서 가장 오해가 많은 영역이라 명확한 구조화가 매우 중요

---

## ✦ 어떤 것들이 들어가는가?

### ✔ 1) 환경 변수 로더 (env.js)

Node.js는 기본적으로 .env를 읽지 않기 때문에,
단일 로더를 만들어 전역에서 process.env를 안전하게 사용할 수 있게 한다.

### ✔ 2) 데이터베이스 설정 (prisma.js)

PrismaClient는 싱글톤으로 만들어야 DB 커넥션 폭주, 커넥션 누수, 성능 저하를 막을 수 있다.
→ 전역에서 사용하는 “환경 의존적인 인스턴스”이므로 config가 제일 적절한 위치.

### ✔ 3) CORS 정책(cors.js)

프론트와 백엔드 간 요청 허용 정책.
환경에 따라 origin이 달라지기 때문에 config에서 통합 관리한다.

### ✔ 4) Session 설정(session.js)

세션은 DB 연결 정보, 쿠키 설정, 운영 환경에 따라 달라지는 옵션 등
환경 의존성이 매우 높기 때문에 config에 둔다.

### ✔ 5) 파일 업로드 설정(multer.js)

파일 용량 제한, 업로드 경로, MIME 타입 필터링 등
전역적으로 재사용되는 환경 정책이므로 config로 분리한다.

### ✔ 6) 로깅 설정(logger.js) — 선택

Winston 기반 로거는 전역에서 쓰기 때문에 config로 둘 수도 있다.
(core/logger로 분리하는 방식도 훨씬 실무적이고 OK)

---

## ✦ 파일 구조 예시

```bash
src/
 ├─ config/
 │    ├─ env.js
 │    ├─ prisma.js
 │    ├─ multer.js
 │    ├─ cors.js
 │    ├─ session.js
 │    └─ logger.js (선택)
```

---

## ✦ 정리

config 폴더는 **“서버 전체에 영향을 미치는 값들”**만 모아둔 공간이다.
이렇게 모듈화해두면:

- 코드 가독성 상승
- 유지보수 단순화
- 환경별 설정 관리가 쉬움
- 팀 협업 시 충돌률 감소
- 비즈니스 로직과 설정이 명확히 분리

이라는 큰 이점이 생긴다.

---

## ✦ 핵심

폴더 구조는 회사마다, 팀마다, 그리고 개발자의 성향마다 모두 달라진다.
middlewares 외에도 configs, core, utils, validation 같은 계층 설계 방식은
프로젝트 규모와 성격에 따라 계속 변한다.

구조가 항상 정답처럼 고정되어 있으면 오히려 확장성과 창의성이 떨어질 수 있다.
정말 중요한 건 각 폴더의 의도와 흐름이 일관되게 유지되는 것이다.
